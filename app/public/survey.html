<!doctype html>
<html lang="en">

<head>
    <title>Sailor Scout Survey</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="../public/style.css" type="text/css" />
</head>

<body>
    <div class="flex-container" id="survey-box">
        <h1>Survey Questions</h1>

    </div>

    <div class="container">
        <h2>About You</h2>
        <form>
            <div class="form-group">
                <label for="input1">Name (required)</label>
                <input type="text" class="form-control" id="Name" style="width: 60%;" placeholder="Dr. Ellie Sattler">
            </div>
            <div class="form-group">
                <label for="input2">Link to photo (required)</label>
                <input type="text" class="form-control" id="photo" style="width: 60%;">
            </div>
            <hr>
            <div class="form-group">
                <label for="question1">You think about food a lot. Like way too much.</label>
                <select class="form-control" id="question1" style="width:50%;">
                    <option value="Default" selected disabled>Mmmm. Food.</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question2">STEM subjects are your favorite topics.</label>
                <select class="form-control" id="question2" style="width: 50%;">
                    <option value="Default" selected disabled>Science, Technology, Engineering, Oh my!</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question3">Cooking is one of your passions, especially baking cute cupcakes.</label>
                <select class="form-control" id="question3" style="width: 50%;">
                    <option value="Default" selected disabled>Only the cutest cupcakes.</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question4">Sometimes you have a hard time keeping your temper under control.</label>
                <select class="form-control" id="question4" style="width: 50%;">
                    <option value="Default" selected disabled>Are you a hothead?</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question5">You love solving mysteries.</label>
                <select class="form-control" id="question5" style="width: 50%;">
                    <option value="Default" selected disabled>Who dunnit?</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question6">You're a total daredevil - bring on the fast cars and motorcycles!</label>
                <select class="form-control" id="question6" style="width: 50%;">
                    <option value="Default" selected disabled>Would you jump out of a perfectly good plane?</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question7">For better or worse, you're very intune with other people's feelings.</label>
                <select class="form-control" id="question7" style="width: 50%;">
                    <option value="Default" selected disabled>~~Feelings~~</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question8">You thrive in competition.</label>
                <select class="form-control" id="question8" style="width: 50%;">
                    <option value="Default" selected disabled>Bring it!</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question9">People often describe you as "cool as a cucumber".</label>
                <select class="form-control" id="question9" style="width: 50%;">
                    <option value="Default" selected disabled>Cold as ice...</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
                <label for="question10">Despite your best efforts, you have a tendency to create chaos wherever you
                    go.</label>
                <select class="form-control" id="question10" style="width: 50%;">
                    <option value="Default" selected disabled>I don't find trouble, trouble finds me.</option>
                    <option value="1">1 (not really me)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (totes me!)</option>
                </select>
            </div>
            <button type="submit" class="btn submit">BFF Power!</button>
        </form>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Your BFF is:</h4>
                </div>
                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <script type="text/javascript">
        //submit button on click
        $(".submit").on("click", function (event) {
            event.preventDefault();

            //checking to make sure required answers are submitted
            if ($("#Name").val() === "" || $("photo").val() === "") {
                alert("Please enter your name and submit a photo!")
            } else {

                //storing the values from each question in an array
                let userScore = [
                    $("#question1").val(),
                    $("#question2").val(),
                    $("#question3").val(),
                    $("#question4").val(),
                    $("#question5").val(),
                    $("#question6").val(),
                    $("#question7").val(),
                    $("#question8").val(),
                    $("#question9").val(),
                    $("#question10").val()
                ]


                //AJAX post sending over the user score
                $.post("/api/friends", { userScore }, function (data) {

                    //jQuery to make the modal pop up with your BFF's name and photo
                    $(".modal-body").html(`<p>${data.name}</p><img src="${data.photo}" style="width: 50%";/>`);
                    $("#modal").modal('show');
                })
            }
        })



    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

</body>

</html>